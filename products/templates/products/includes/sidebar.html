{% load product_tools %}

<div class="sidebar col-12 col-lg-3 col-xl-2 mt-2">
	<div class="sticky-sidebar mb-3">
		{% if search_term %}
			<div class="row">
				<div class="col">
					<div class="results-alert bg-white shadow-sm border border-success p-2 mb-4">
						<h6 class="mb-0">
							<span>Showing results for "{{ search_term }}"</span>
							<span>
								<a href="{% url 'products' %}" class="text-danger">
									<span class="icon mx-1"><i class="fas fa-times"></i></span>
								</a>
							</span>
						</h6>
					</div>
				</div>
			</div>
		{% endif %}
		<div class="row">
			<div class="col">
				<h6 class="text-info">Quick Search</h6>
			</div>
		</div>
		<div class="row">
			<div class="col">
				<form class="form mb-4" method="GET" action="{% url 'products' %}">
					<div class="form-row">
						<div class="col my-auto">
							<div class="input-group">
								<input class="form-control form-control input-info border border-info" type="text" name="q" placeholder="Products and Descriptions" id="id_q_sidebar">
								<div class="input-group-append">
									<button class="form-control form-control btn btn-info" type="submit">
										<span class="icon">
											<i class="fas fa-search"></i>
										</span>
									</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
		{% if current_categories %}
			<div class="row">
				<div class="col">
					<div>
						<h6 class="text-info">Current Categories</h6>
						<div>
							{% for c in current_categories %}
								<a class="category-badge" href="{% url 'products' %}?category={{ c.name }}"><span class="p-2 mt-1 badge badge-light border border-dark">{{ c.friendly_name }}</span></a>
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-12 mb-4 mt-1">
					<a href="{% url 'products' %}" class="text-danger">Clear</a>
				</div>
			</div>
		{% endif %}
		<div class="row">
			<div class="col">
				<h6 class="text-info">Filters</h6>
			</div>
		</div>
		<div class="row">
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'price_asc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=price&direction=asc' }}">
					<span>Price</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-numeric-down"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'price_desc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=price&direction=desc' }}">
					<span>Price</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-numeric-down-alt"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'rating_asc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=rating&direction=asc' }}">
					<span>Rating</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-numeric-down"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'rating_desc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=rating&direction=desc' }}">
					<span>Rating</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-numeric-down-alt"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'name_asc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=name&direction=asc' }}">
					<span>Name</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-alpha-down"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'name_desc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=name&direction=desc' }}">
					<span>Name</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-alpha-down-alt"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'category_asc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=category&direction=asc' }}">
					<span>Category</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-alpha-down"></i>
					</span>
				</a>
			</div>
			<div class="col-6 col-lg-12">
				<a class="btn btn-sm my-1 btn-block {% if current_sorting != 'category_desc' %}btn-light filter-hover-info border-info text-info{% else %}btn-info{% endif %}" href="{{ request.GET | update_get:'sort=category&direction=desc' }}">
					<span>Category</span>
					<span class="icon ml-1">
						<i class="fas fa-sort-alpha-down-alt"></i>
					</span>
				</a>
			</div>
		</div>
		<div class="row">
			<div class="col-12">
				<a href="{% url 'products' %}" class="text-danger">Reset All</a>
			</div>
		</div>
	</div>
</div>